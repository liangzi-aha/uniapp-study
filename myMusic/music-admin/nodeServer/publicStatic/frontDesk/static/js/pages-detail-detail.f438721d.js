(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-detail-detail"],{"01ac":function(i,a,e){"use strict";e.r(a);var t=e("8cde"),n=e.n(t);for(var o in t)"default"!==o&&function(i){e.d(a,i,(function(){return t[i]}))}(o);a["default"]=n.a},"2dcb":function(i,a,e){var t=e("51ea");"string"===typeof t&&(t=[[i.i,t,""]]),t.locals&&(i.exports=t.locals);var n=e("4f06").default;n("47b76db2",t,!0,{sourceMap:!1,shadowMode:!1})},"51ea":function(i,a,e){var t=e("24fb"),n=e("1de5"),o=e("2a57"),r=e("db64");a=t(!1);var s=n(o),l=n(r);a.push([i.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.detail[data-v-62d1e5bd]{height:100vh}.detail .container[data-v-62d1e5bd]{height:calc(100vh - 75px);box-sizing:border-box;overflow:hidden}.detail .container uni-scroll-view[data-v-62d1e5bd]{height:100%!important;box-sizing:border-box}.detail .detail-lyric[data-v-62d1e5bd]{font-size:%?32?%;line-height:%?82?%;height:%?246?%;text-align:center;overflow:hidden;color:#6f6e73}.detail .detail-lyric .detail-lyric-wrap[data-v-62d1e5bd]{-webkit-transform:.5s;transform:.5s}.detail .detail-lyric .detail-lyric-wrap .detail-lyric-item[data-v-62d1e5bd]{height:%?82?%}.detail .detail-lyric .detail-lyric-wrap .active[data-v-62d1e5bd]{color:#fff}.detail .detail-play[data-v-62d1e5bd]{width:%?580?%;height:%?580?%;background:url('+s+");background-size:cover;margin:%?214?% auto 0;position:relative}.detail .detail-play uni-image[data-v-62d1e5bd]{border-radius:50%;width:%?370?%;height:%?370?%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;-webkit-animation:10s linear move-data-v-62d1e5bd infinite;animation:10s linear move-data-v-62d1e5bd infinite;-webkit-animation-play-state:paused;animation-play-state:paused}.detail .detail-play .detail-play-run[data-v-62d1e5bd]{-webkit-animation-play-state:running;animation-play-state:running}@-webkit-keyframes move-data-v-62d1e5bd{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes move-data-v-62d1e5bd{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.detail .detail-play uni-text[data-v-62d1e5bd]{width:%?100?%;height:%?100?%;font-size:%?100?%;color:#fff;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.detail .detail-play .pause-vidio[data-v-62d1e5bd]{-webkit-transform:rotate(-20deg);transform:rotate(-20deg)}.detail .detail-play uni-view[data-v-62d1e5bd]{width:%?230?%;height:%?360?%;background:url("+l+");position:absolute;left:%?100?%;right:0;top:%?-200?%;margin:auto;background-size:cover;-webkit-transform:.5s;transform:.5s;-webkit-transform-origin:%?10?% %?20?%;transform-origin:%?10?% %?20?%}.detail .playMusic-play[data-v-62d1e5bd]{padding:%?50?% %?30?%;display:flex;align-items:center;justify-content:space-between}.detail .playMusic-play .loveMusic[data-v-62d1e5bd]{color:#b84343}.detail .playMusic-play uni-text[data-v-62d1e5bd]{font-size:%?60?%;margin:0 %?35?%}.detail .playMusic-play uni-text[data-v-62d1e5bd]:nth-child(3){font-size:%?90?%}",""]),i.exports=a},7985:function(i,a,e){"use strict";var t=e("2dcb"),n=e.n(t);n.a},"8cde":function(i,a,e){"use strict";var t=e("4ea4");e("d3b7"),e("ac1f"),e("3ca3"),e("5319"),e("ddb0"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=t(e("e143")),o=t(e("8854")),r={data:function(){return{songDetail:{musicImg:""},isPlayMusic:!0,isLoading:!0,baseImgUrl:this.$imgBaseUrl,value:0,time:"",LoopPlayback:!1,isLoveMusic:!1,songLyric:[],lyricIndex:0}},onLoad:function(i){this.getMusic(i.songId),n.default.prototype.$nextMusic=function(i){uni.redirectTo({url:"/pages/detail/detail?songId="+i})};var a=uni.getStorageSync("LoopPlayback");this.LoopPlayback=!!a},onHide:function(){this.clearTime()},onUnload:function(){this.clearTime()},methods:{getMusic:function(i){var a=this;this.$getNextMusic(i),this.isLoading=!0;var e=this.$api,t=e.musicDetail,n=e.lyric;Promise.all([n(i),t(i)]).then((function(i){if(i[0].success&&i[0].data){var e=i[0].data,t=/\[([^\]]+)\]([^\[]+)/g,n=[];e.replace(t,(function(i,e,t){n.push({time:a.$formatTimeToSec(e),lyric:t.replace(/\r\n/g,"")})})),a.songLyric=n}else a.songLyric=[];if(uni.setStorageSync("lyric",a.songLyric),i[1].success){a.songDetail=i[1].data[0],uni.setStorage({key:"songDetail",data:i[1].data[0]}),a.$CreateBgAudioManager(a.songDetail.musicName,(function(i){a.isPlayMusic=i}),a.urlReplace(a.songDetail.musicUrl),a.urlReplace(a.songDetail.musicImg),a.sliderInterval,a.clearTime);var r=uni.getStorageSync("userToken");if(r){var s=o.default.verify(r).data.id;a.playLoveMusic(s,a.songDetail.id)}}a.isLoading=!1}))},UpMusic:function(i){this.clearTime(),this.value=0;var a=uni.getStorageSync("UpMusicId");this.getMusic(a)},nextMusic:function(i){this.clearTime(),this.value=0;var a=uni.getStorageSync("nextMusicId");this.getMusic(a)},handlePlay:function(){this.$bgAudioManager.paused?this.$bgAudioManager.play():this.$bgAudioManager.pause()},urlReplace:function(i){return this.baseImgUrl+i.replace(/\\/g,"/")},sliderChange:function(i){if(this.value=i.value,this.$bgAudioManager){var a=this.$bgAudioManager.duration;this.$bgAudioManager.seek(this.value/100*a)}},sliderInterval:function(){var i=this;if(clearInterval(this.time),this.$bgAudioManager&&!this.$bgAudioManager.paused){console.log("播放音乐");var a=this.$bgAudioManager.duration;this.time=setInterval((function(){i.value=i.$bgAudioManager.currentTime/a*100;for(var e=i.lyricIndex;e<i.songLyric.length;e++){if(console.log(i.lyricIndex),i.$bgAudioManager.currentTime>i.songLyric[i.songLyric.length-1]){i.lyricIndex=e;break}if(i.$bgAudioManager.currentTime>i.songLyric[e].time&&i.$bgAudioManager.currentTime<i.songLyric[e+1].time){i.lyricIndex=e;break}}}),500)}else console.log("没播放音乐")},clearTime:function(){clearInterval(this.time)},handleLoopPlayback:function(){this.LoopPlayback=!this.LoopPlayback,this.LoopPlayback?uni.setStorageSync("LoopPlayback",!0):uni.removeStorageSync("LoopPlayback")},playLoveMusic:function(i,a){var e=this,t=this.$api.playLoveMusic;t(i,a).then((function(i){e.isLoveMusic=i.isLove}))},loveMusic:function(){var i=this,a=uni.getStorageSync("userToken");if(a){var e=this.$api.changeLoveMusic,t=o.default.verify(a).data.id;e(t,this.songDetail.id).then((function(a){a.success&&(i.isLoveMusic=!i.isLoveMusic)}))}else uni.navigateTo({url:"../login/login"})}}};a.default=r},"9dc7":function(i,a,e){"use strict";e.r(a);var t=e("c13d"),n=e("01ac");for(var o in n)"default"!==o&&function(i){e.d(a,i,(function(){return n[i]}))}(o);e("7985");var r,s=e("f0c5"),l=Object(s["a"])(n["default"],t["b"],t["c"],!1,null,"62d1e5bd",null,!1,t["a"],r);a["default"]=l.exports},c13d:function(i,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return t}));var t={musichead:e("9f9f").default,bingProgress:e("8410").default},n=function(){var i=this,a=i.$createElement,e=i._self._c||a;return e("v-uni-view",{staticClass:"detail"},[i.isLoading?i._e():e("v-uni-view",{staticClass:"fixbg",style:{"background-image":"url("+i.urlReplace(i.songDetail.musicImg)+")"}}),e("musichead",{attrs:{title:i.songDetail.musicName,icon:!0,color:"white"}}),i.isLoading?i._e():e("v-uni-view",{staticClass:"container"},[e("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[e("v-uni-view",{staticClass:"detail-play",on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.handlePlay.apply(void 0,arguments)}}},[e("v-uni-image",{class:{"detail-play-run":i.isPlayMusic},attrs:{src:i.urlReplace(i.songDetail.musicImg)}}),e("v-uni-text",{staticClass:"iconfont",class:i.isPlayMusic?"icon-pause":"icon-bofang"}),e("v-uni-view",{class:{"pause-vidio":!i.isPlayMusic}})],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:i.songLyric.length>0,expression:"songLyric.length > 0"}],staticClass:"detail-lyric"},[e("v-uni-view",{staticClass:"detail-lyric-wrap",style:{marginTop:82*-(i.lyricIndex-1)+"rpx"}},i._l(i.songLyric,(function(a,t){return e("v-uni-view",{key:t,staticClass:"detail-lyric-item",class:{active:i.lyricIndex==t}},[i._v(i._s(a.lyric))])})),1)],1),e("bing-progress",{attrs:{strokeWidth:"5px",handleWidth:"20px",value:i.value,handleHeight:"20px",handleColor:"#aca2a2",noActiveColor:"rgb(83,83,83)",activeColor:"rgb(199,12,12)",showInfo:!1,handleBorderRadius:"10px"},on:{dragend:function(a){arguments[0]=a=i.$handleEvent(a),i.sliderChange.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"playMusic-play"},[e("v-uni-text",{class:i.LoopPlayback?"iconfont icon-24gl-repeatOnce2":"iconfont icon-24gl-repeat2",on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.handleLoopPlayback.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"iconfont icon-yduishangyiqu",on:{click:function(a){a.stopPropagation(),arguments[0]=a=i.$handleEvent(a),i.UpMusic()}}}),e("v-uni-text",{class:i.isPlayMusic?"iconfont icon-pause":"iconfont icon-bofang",on:{click:function(a){a.stopPropagation(),arguments[0]=a=i.$handleEvent(a),i.handlePlay()}}}),e("v-uni-text",{staticClass:"iconfont icon-yduixiayiqu",on:{click:function(a){a.stopPropagation(),arguments[0]=a=i.$handleEvent(a),i.nextMusic(i.songDetail.id)}}}),e("v-uni-text",{class:i.isLoveMusic?"iconfont icon-aixin1 loveMusic":"iconfont icon-aixin",on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.loveMusic.apply(void 0,arguments)}}})],1)],1)],1)],1)},o=[]}}]);